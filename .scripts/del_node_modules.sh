#!/bin/bash

echo "Searching for all node_modules directories..."

node_modules_dirs=$(find ~ -type d -name "node_modules" 2>/dev/null)

if [[ -z "$node_modules_dirs" ]]; then
    echo "No node_modules directories found."
    exit 0
fi

echo "Found the following node_modules directories:"
echo "$node_modules_dirs"

read -p "are you sure? (yes/no)" confirm

if [[ "$confirm" != "yes" ]]; then
    echo "Operation canceled."
    exit 0
fi

echo "Deleting node_modules directories..."
while IFS= read -r dir; do
    echo "Deleting: $dir"
    rm -rf "$dir"
done <<< "$node_modules_dirs"

echo "Done"
